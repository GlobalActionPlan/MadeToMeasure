<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:define-macro="master"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="MadeToMeasure">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <metal:page_title define-slot="head_title">
           <title>Made to measure</title>
        </metal:page_title>
    <meta name="keywords" content="python web application" />
    <meta name="description" content="pyramid web application" />
    <style tal:condition="organisation and hex_color|False" type="text/css">
        a, button { color: ${hex_color}; }
        button { border: 1px solid ${hex_color}; }
        #page-wrapper { background-color: ${hex_color}; }
    </style>
    <style tal:condition="organisation and logo_link|False" type="text/css">
        #logo { background-image: url(${logo_link}); }
    </style>
    <metal:head define-slot="head"></metal:head>
</head>
<body>

<nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="${request.resource_url(view.root)}">m2m</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="nav navbar-nav" tal:condition="view.userid"><!-- only authenticated -->
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <span i18n:translate="">System</span> <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li tal:replace="structure view.render_view_group('global_menu', context = view.root)">Global menu</li>
          </ul>
        </li>
        <li class="dropdown" tal:condition="view.organisation">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <span i18n:translate="">Organisation</span> <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li tal:replace="structure view.render_view_group('organisation_menu', context = view.organisation)">Organisation menu</li>
          </ul>
        </li>
        <li class="dropdown" tal:condition="view.survey">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <span i18n:translate="">Survey</span> <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li tal:replace="structure view.render_view_group('survey_menu', context = view.survey)">Survey menu</li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <span class="glyphicon glyphicon-flag"></span>
              Language <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <tal:iterate repeat="lang view.trans_util.available_languages">
            <li>
                <a href="${request.resource_url(view.root, 'select_lang', query = {'lang': lang, 'return_url': request.url})}">
                    ${lang}
                </a>
            </li>
            </tal:iterate>
          </ul>
        </li>
        <li tal:condition="not view.userid">
            <a href="${request.resource_url(view.root, 'login')}" i18n:translate="">Login</a>
        </li>
        <li tal:condition="view.userid" class="dropdown user-profile">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              <span class="glyphicon glyphicon-user"></span>
              ${view.userid} <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li><a href="${request.resource_url(view.user_profile)}">Your account</a></li>
            <li><a href="${request.resource_url(view.user_profile, 'edit')}">Change details</a></li>
            <li><a href="${request.resource_url(view.user_profile, 'change_password')}">Change password</a></li>
            <li class="divider"></li>
            <li><a href="${request.resource_url(view.root, 'logout')}">Logout</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div class="container">
    <div class="row">
        <div class="col-md-12">
        <div id="main-area-wrapper"><div id="main-area">

            <div tal:condition="view.userid">
                <ol class="breadcrumb">
                  <li tal:repeat="obj view.path">
                    <a href="${request.resource_url(obj)}" tal:content="obj.get_translated_title()|obj.title">Title</a>
                  </li>
                </ol>
            </div>

            <div id="flash_messages" tal:define="flash_messages view.get_flash_messages()">
                <tal:iterate repeat="flash_message flash_messages">
                    <div class="alert alert-info alert-dismissable">
                      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                      <div class="message" tal:content="structure flash_message">Message</div>
                    </div>
                </tal:iterate>
            </div>

            <ul class="nav nav-tabs">
                <tal:tabs tal:replace="structure view.render_view_group('context_menu')">Context tabs / menu</tal:tabs>
            </ul>

            <metal:heading define-slot="page_heading">
                <h1 tal:content="context.get_translated_title()|context.title">Title</h1>
            </metal:heading>
            <div id="content">
                <metal:main-content define-slot="content">
                    <!-- Content slot, where other templates render -->
                </metal:main-content>
            </div>
            
        </div></div><!-- main area and wrapper -->
        </div>
    </div><!-- /row -->
</div>

<div class="footer navbar-bottom" tal:condition="view.root"
     tal:content="structure view.root.get_field_value('footer_html', u'')">Footer
</div>

<div class="js_translation" style="display: none !important;">
   <pre class="js_trans_confirm_back" i18n:translate="">If you go back, the changes made here will be permanently lost.</pre>
</div>

</body>
</html>
