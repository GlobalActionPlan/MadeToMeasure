<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:define-macro="master"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="voteit.core">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <metal:page_title define-slot="head_title">
           <title>Made to measure</title>
        </metal:page_title>
    <meta name="keywords" content="python web application" />
    <meta name="description" content="pyramid web application" />

    <link href='http://fonts.googleapis.com/css?family=Ubuntu:700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Judson' rel='stylesheet' type='text/css'>

    <link href="${request.application_url}/static/reset.css" rel="stylesheet" type="text/css" />
    <link href="${request.application_url}/static/main.css" rel="stylesheet" type="text/css" />
	
	<tal:css_overrides tal:condition="organisation|False"
	   tal:replace="structure organisation.render_dynamic_css(request)"></tal:css_overrides>

    <tal:deform tal:condition="form_resources|False">
	    <tal:css repeat="css_file form_resources['css']|[]">
	    <link rel="stylesheet"
	          tal:attributes="href string:/deform/${css_file}" type="text/css" />
	    </tal:css>
        <tal:js repeat="js_file form_resources['js']|[]">
        <script type="text/javascript"
                tal:attributes="src string:/deform/${js_file}"></script>
        </tal:js>
	    <script type="text/javascript">
	        deform.load()
	    </script>
    </tal:deform>

    <metal:head define-slot="head"></metal:head>
    
</head>
<body>
	
	<div id="page-wrapper"><!-- Wraps around the whole page -->
	
        <div id="page-header">
        	<!-- for logo etc -->
			
			<div id="logo"></div>
			
			<div tal:condition="userid" id="system-toolbar">
				
				<span i18n:translate="">Your time</span>
				<span tal:content="user_dt.dt_format(user_dt.localnow())"></span>
				|
				<a href="${resource_url(user, request)}"
				   title="Click to go to profile. There you can make changes as well."
				   i18n:attributes="title">${user.get_title()} (${userid})</a>
				|
				<a href="${resource_url(root, request)+'logout'}" i18n:translate="">Logout</a>
				<br/>
                <a href="${resource_url(root, request)}" i18n:translate="">Root</a> |
                <a href="${resource_url(root['participants'], request)}" i18n:translate="">Participants</a> |
                <a href="${resource_url(root['questions'], request)}" i18n:translate="">Global questions</a> |
                <a href="${resource_url(root['users'], request)}" i18n:translate="">System users</a>
				
			</div>
		</div>
		
	    <div id="main-area">
            <div id="flash_messages" tal:content="structure flash_messages()">Flash messages</div>
			<metal:heading define-slot="page_heading">
				<h1 tal:content="context.get_title()">Title</h1>
			</metal:heading>
		
		    <div tal:condition="userid" id="context-toolbar" tal:condition="not:form|False">
		
		        <div id="addmenu" tal:condition="addable_types">
		            <tal:iterate repeat="type_id addable_types">
		                <a href="${resource_url(context, request) + 'add?content_type=' + type_id}">Add ${type_id}</a>
		            </tal:iterate>
		        </div>
		        <div id="editmenu">
		            <a href="${resource_url(context, request) + 'edit'}">Edit</a>
		        </div>
				<tal:survey condition="context.content_type == 'Survey'">
			        <div id="invitaions">
			            <a href="${resource_url(context, request) + 'invitation_emails'}">Invitations</a>
			        </div>
			        <div id="participants">
			            <a href="${resource_url(context, request) + 'participants'}">Participants</a>
			        </div>
                    <div id="results">
                        <a href="${resource_url(context, request) + 'results'}">Results</a>
                    </div>
				</tal:survey>
		    </div>
		
            <div id="content">
				<metal:main-content define-slot="content">
					<!-- Content slot, where other templates render -->
				</metal:main-content>
			</div>
		</div>
	
		<div id="footer"></div>
    </div>

</body>
</html>
